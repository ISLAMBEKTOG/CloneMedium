<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="/webjars/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/style.css">
    <title>All author topics</title>
</head>
<body>
<!------------------------------------------------------- Шапка ------------------------------------------------------->
<nav th:replace="fragments/header :: home_header"></nav>
<!--------------------------------------------------------------------------------------------------------------------->
<!------------------------------------------------------- Топики ------------------------------------------------------>

<div class="d-flex justify-content-center py-5">
    <div id="topics_container" class="container mx-0 py-3">
        <div class="card mb-2 mt-0" th:each="topic:${listOfTopics}">
            <div class="card-header d-flex justify-content-between ' + moderated + '">
                <a th:href="'/topic/' + ${topic.id}">
                    <h5 th:utext="${topic.title}"></h5>
                </a>
                <h6 th:utext="${topic.dateCreated}"></h6>
            </div>
            <div class="card-body">
                <h6 class="card-title" th:each="author:${topic.authors}">Автор:
                    <a th:href="'/find/author/' + ${author.id}" th:utext="' ' + ${author.firstName} + ' ' + ${author.lastName}"/>
                </h6>
                <h6 class="card-title" th:each="tag:${topic.hashtags}">
                    <a href="#" th:utext="${tag.name}"/>
                </h6>
                <p class="card-text" th:utext="${topic.content}"></p>
                <i class="fa fa-thumbs-o-up" id="iconLikeOfTopic-${topic.id}" data-id="${topic.id}"></i>
                <span class="text-info" id="likeCounter" data-id="${topic.id}" th:utext="${topic.likes}"></span>
            </div>
        </div>
    </div>
    <div class="my-3">
        <div class="position-fixed">
            <!-- Кнопка добавления топика -->
            <div sec:authorize="isAuthenticated()" class="mb-3">
                <button th:replace="fragments/add-topic-modal :: add-topic_button"></button>
            </div>

            <form id="themes_form">
                <select name="themes" id="themes_select" class="custom-select" size="3" multiple>
                    <th:block th:each="theme : ${themes}">
                        <option th:value="${theme.getId()}" th:text="${theme.getName()}"></option>
                    </th:block>
                </select>
                <button id="theme_button" type="button" class="btn btn-dark mt-2">
                    Найти по теме
                </button>
            </form>
        </div>
    </div>
</div>

<!--------------------------------------------------------------------------------------------------------------------->

<!------------------------------------------------ Модальное окно ----------------------------------------------------->
<nav th:replace="fragments/add-topic-modal :: add-topic_modal"></nav>
<!--------------------------------------------------------------------------------------------------------------------->

<script src="/webjars/popper.js/1.14.3/popper.min.js"></script>
<script src="/webjars/jquery/3.4.1/jquery.min.js"></script>
<script src="/webjars/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<script src="/js/getAllTopicsByHashtag.js"></script>
<script src="/js/all_author_topics_events.js"></script>
<script src="/js/util/topic-in-card.js"></script>
<script src="/js/add-topic_events.js"></script>
<script src="/js/util/timeConverter.js"></script>
<script src="/js/parseText.js"></script>
<script src="/js/likedTopic.js"></script>
<script sec:authorize="isAuthenticated()" src="/js/addTopic.js"></script>
<script sec:authorize="isAuthenticated()" src="/js/add-topic_events.js"></script>
<script sec:authorize="isAuthenticated()" src="/js/getNotifCounterByPrincipal.js"></script>
</body>
</html>